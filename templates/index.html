<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Event Manager</title>
    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
        background-color: #121212;
        color: #eee;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }

      h1,
      p {
        color: #eee;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }

      table th,
      table td {
        border: 1px solid #121212;
        padding: 10px;
        text-align: left;
      }

      table th {
        background-color: #333333;
      }
      table tbody tr:nth-child(odd) {
        background-color: #444444;
        color: #ffffff;
      }

      table tbody tr:nth-child(even) {
        background-color: #333333;
        color: #ffffff;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Event Manager</h1>
      <hr />
      <table>
        <thead>
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Date</th>
            <th>Options</th>
          </tr>
        </thead>
        <tbody>
          {% for event in events %}
          <tr>
            <td>{{ event[1] }}</td>
            <td>{{ event[2] }}</td>
            <td>{{ event[3] }}</td>
            <td>
              <button onclick="editEvent('{{ event[0] }}')">Edit</button>
              <br /><br />
              <button onclick="deleteEvent('{{ event[0] }}')">Delete</button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <script>
      function deleteEvent(eventId) {
        if (!confirm("Are you sure you want to delete this event?")) {
          return;
        }

        fetch("/delete/" + eventId, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => response.json())
          .then((data) => {
            alert(data.message);
            if (data.status === "success") {
              window.location.reload();
            }
          })
          .catch((error) => {
            console.error("Error:", error);
            alert("Error deleting the event.");
          });
      }
    </script>
  </body>
</html>
